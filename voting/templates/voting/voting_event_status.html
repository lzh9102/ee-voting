{% extends 'voting/layout-admin.html' %}
{% load i18n %}

{% block content %}

<div class="row">
  <div class="col-lg-12">
    <h2>{% block title %}{{ voting_event.title }}{% endblock %}</h2>
  </div>
</div>

<div class="row">
  
  <!-- chart -->
  <div class="col-lg-6">
    <p>
      <div id="candidate-chart" style="height: 250px"></div>
    </p>
  </div>

  <!-- candidates list -->
  <div class="col-lg-6">
    <h3>{% trans "Candidates" %}
    <p>
      <table class="table table-striped table-bordered table-hover">
        <thead>
          <th>{% trans "Name" %}</th>
          {# Translators: Noun. Number of votes. #}
          <th>{% trans "Votes" %}</th>
        </thead>
        <tbody>
          {% for candidate in candidates %}
          <tr>
            <td>{{ candidate.full_name }}</td>
            <td>{{ candidate.voters.all.count }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </p>
  </div>

</div>

{% endblock %}

{% block scripts %}
<!-- draw charts -->
<script>
  Morris.Donut({
    element: 'candidate-chart',
    data: [
    {% for candidate in candidates %}
      {label: "{{ candidate }}", value: {{ candidate.voters.all.count }}},
    {% endfor %}
      {# Translators: Number of voters who didn't vote for any candidate #}
      {label: "{% trans "Not Voted" %}", value: {{ not_voted_voters.count }}}
    ]
  });
</script>
{% endblock %}
